<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة التحكم | توزيع الحصاد</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-brand"> لوحة التحكم </div>
            <nav class="sidebar-menu">
                <a href="#" class="active">إدارة المنتجات</a>
            </nav>
            <div style="margin-top: auto;">
                <button id="logoutBtn" class="btn"
                    style="background: rgba(255,255,255,0.1); color: white; width: 100%;">تسجيل الخروج</button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="admin-content">
            <header class="admin-header">
                <div>
                    <h2 style="font-size: 1.8rem; font-weight: 700;">المنتجات</h2>
                    <p class="text-muted">إدارة المخزون والمنتجات</p>
                </div>
                <div>
                    <a href="index.html" target="_blank" class="btn"
                        style="border: 1px solid #d1d5db; margin-left: 1rem;">عرض الموقع</a>
                    <button id="addProductBtn" class="btn btn-primary">+ إضافة منتج جديد</button>
                </div>
            </header>

            <!-- Filters -->
            <div style="margin-bottom: 2rem; display: flex; gap: 1rem;">
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                    <input type="checkbox" id="showLowStock"> عرض المخزون المنخفض
                </label>
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                    <input type="checkbox" id="showExpired"> عرض المنتهي الصلاحية
                </label>
            </div>

            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>الاسم</th>
                            <th>التصنيف</th>
                            <th>السعر</th>
                            <th>المخزون</th>
                            <th>الانتهاء</th>
                            <th>إجراءات</th>
                        </tr>
                    </thead>
                    <tbody id="adminProductTable">
                        <!-- JS Populated -->
                    </tbody>
                </table>
            </div>
        </main>
    </div>

    <!-- Add/Edit Modal -->
    <div id="productModal" class="modal-overlay">
        <div class="modal">
            <h2 id="modalTitle" style="margin-bottom: 1.5rem;">إضافة منتج</h2>
            <form id="productForm">
                <input type="hidden" id="pId">
                <div class="form-group">
                    <label>اسم المنتج</label>
                    <input type="text" id="pName" class="form-control" required>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label>التصنيف</label>
                        <select id="pCategory" class="form-control" required>
                            <optgroup label="المبيدات">
                                <option value="Insecticide">مبيد حشري</option>
                                <option value="Fungicide">مبيد فطري</option>
                                <option value="Acaricide">مبيد اكاروسي</option>
                                <option value="Herbicide">مبيد حشائش</option>
                            </optgroup>
                            <optgroup label="الأسمدة">
                                <option value="Fertilizers-NPK">أسمدة NPK</option>
                                <option value="Fertilizers-Specialized">أسمدة متخصصة</option>
                                <option value="Fertilizers-GrowthRegulator">منظم نمو</option>
                                <option value="Fertilizers-SoilConditioner">محسنات تربة</option>
                            </optgroup>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>السعر (ج.م)</label>
                        <input type="number" id="pPrice" step="0.01" class="form-control" required>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label>كمية المخزون</label>
                        <div style="display: flex; gap: 5px;">
                            <input type="number" id="pStock" class="form-control" required style="flex: 2;">
                            <select id="pUnitType" class="form-control" style="flex: 1; padding: 0.6rem 0.2rem;">
                                <option value="Bottle">عبوة</option>
                                <option value="Bag">كيس</option>
                                <option value="Tablet">قرص</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>تاريخ الانتهاء</label>
                        <input type="date" id="pExpiry" class="form-control">
                    </div>
                </div>

                <div class="form-group">
                    <label id="lblActiveIngredient">المواد الفعالة</label>
                    <div id="activeIngredientsContainer">
                        <!-- Dynamic inputs will be added here -->
                        <div class="active-ingredient-row" style="display: flex; gap: 5px; margin-bottom: 5px;">
                            <input type="text" class="form-control active-ingredient-input"
                                placeholder="مثال: Abamectin 1.8%">
                            <button type="button" class="btn btn-primary"
                                onclick="addActiveIngredientInput()">+</button>
                        </div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label>حجم العبوة</label>
                        <input type="text" id="pPackageSize" class="form-control" placeholder="مثال: 1 لتر">
                    </div>
                    <div class="form-group">
                        <label>حجم الكرتونة</label>
                        <input type="text" id="pCartonSize" class="form-control" placeholder="مثال: 12 عبوة">
                    </div>
                    <div class="form-group">
                        <label>المنشأ</label>
                        <input type="text" id="pOrigin" class="form-control" placeholder="مثال: الأردن">
                    </div>
                </div>

                <div class="form-group">
                    <label>الوصف</label>
                    <textarea id="pDesc" class="form-control" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label>صورة المنتج</label>
                    <input type="file" id="pImage" class="form-control" accept="image/*">
                </div>

                <div style="display: flex; justify-content: flex-end; gap: 1rem; margin-top: 2rem;">
                    <button type="button" class="btn" style="background: #e5e7eb;" id="cancelModal">إلغاء</button>
                    <button type="submit" class="btn btn-primary">حفظ المنتج</button>
                </div>
            </form>
        </div>
    </div>

    <footer style="background: white; padding: 2rem 0; margin-top: 3rem; border-top: 1px solid #e5e7eb;">
        <div class="container" style="text-align: center; color: var(--text-muted);">
            <p>&copy; جميع الحقوق محفوظة لدى شركة هارفست 2026</p>
            <p style="margin-top: 5px; font-size: 0.9rem;">تصميم وتطوير <a
                    href="https://www.facebook.com/ebrahim.magdy25" target="_blank"
                    style="color: var(--primary-color); text-decoration: none; font-weight: 600;">م / ابراهيم مجدى</a>
            </p>
        </div>
    </footer>

    <script src="js/admin.js"></script>
</body>

</html>